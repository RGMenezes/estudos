{{#each erros}}
    <div class="alert alert-danger">{{texto}}</div>
{{else}}
{{/each}}

<div class="card">
    <div class="card-body">
        <h4>Editar postagem: </h4>
        <form action="/admin/postagens/edit" method="POST" >

            <input type="hidden" name="id" value="{{postagem._id}}">

            <label for="titulo">Título: </label>
            <input class="form-control" type="text" name="titulo" id="titulo" placeholder="Título da postagem" value="{{postagem.titulo}}">

            <label for="slug">Slug: </label>
            <input class="form-control" type="text" name="slug" id="slug" placeholder="Slug da postagem" value="{{postagem.slug}}">

            <label for="descricao">Descrição: </label>
            <input class="form-control" type="text" name="descricao" id="descricao" placeholder="Descrição da postagem" value="{{postagem.descricao}}">

            <label for="conteudo">Conteúdo: </label>
            <textarea class="form-control" name="conteudo" id="conteudo">{{postagem.conteudo}}</textarea>

            <label for="categoria">Categoria: </label>
            <Select class="form-select" name="categoria" id="categoria" >
                {{#each categorias}}
                    <option value="{{_id}}">{{nome}}</option>
                {{else}}
                    <option value="0">Nenhuma categoria registrada</option>
                {{/each}}
            </Select>
            <br>
            
            <button type="submit" class="btn btn-success">Editar postagem</button>

        </form>
    </div>
</div>


<script>
    const categoria = document.querySelector("#categoria");
    const arrOption = document.querySelectorAll("option");
    const idCategoriaPostagem = "{{postagem.categoria._id}}";

    for(let option of arrOption){
        if(option.value == idCategoriaPostagem){
            option.setAttribute("selected", "true");
        };
    };
</script>